From 00e499b6eef608c2b3eceec3b51db412637cd803 Mon Sep 17 00:00:00 2001
From: Michael Stefaniuc <mstefani@winehq.org>
Date: Fri, 20 Jul 2018 20:15:42 +0200
Subject: [PATCH] hhctrl.ocx: Use the ARRAY_SIZE() macro

Signed-off-by: Michael Stefaniuc <mstefani@winehq.org>
---
 dlls/hhctrl.ocx/chm.c  | 12 ++++++------
 dlls/hhctrl.ocx/help.c |  6 +++---
 2 files changed, 9 insertions(+), 9 deletions(-)

diff --git a/dlls/hhctrl.ocx/chm.c b/dlls/hhctrl.ocx/chm.c
index 8cf2539d71..01403368b0 100644
--- a/dlls/hhctrl.ocx/chm.c
+++ b/dlls/hhctrl.ocx/chm.c
@@ -483,12 +483,12 @@ LPCWSTR skip_schema(LPCWSTR url)
     static const WCHAR msits_schema[] = {'m','s','-','i','t','s',':'};
     static const WCHAR mk_schema[] = {'m','k',':','@','M','S','I','T','S','t','o','r','e',':'};
 
-    if(!strncmpiW(its_schema, url, sizeof(its_schema)/sizeof(WCHAR)))
-        return url+sizeof(its_schema)/sizeof(WCHAR);
-    if(!strncmpiW(msits_schema, url, sizeof(msits_schema)/sizeof(WCHAR)))
-        return url+sizeof(msits_schema)/sizeof(WCHAR);
-    if(!strncmpiW(mk_schema, url, sizeof(mk_schema)/sizeof(WCHAR)))
-        return url+sizeof(mk_schema)/sizeof(WCHAR);
+    if(!strncmpiW(its_schema, url, ARRAY_SIZE(its_schema)))
+        return url + ARRAY_SIZE(its_schema);
+    if(!strncmpiW(msits_schema, url, ARRAY_SIZE(msits_schema)))
+        return url + ARRAY_SIZE(msits_schema);
+    if(!strncmpiW(mk_schema, url, ARRAY_SIZE(mk_schema)))
+        return url + ARRAY_SIZE(mk_schema);
 
     return url;
 }
diff --git a/dlls/hhctrl.ocx/help.c b/dlls/hhctrl.ocx/help.c
index c7a2a7a9e2..75b28f2f57 100644
--- a/dlls/hhctrl.ocx/help.c
+++ b/dlls/hhctrl.ocx/help.c
@@ -241,7 +241,7 @@ static BOOL AppendFullPathURL(LPCWSTR file, LPWSTR buf, LPCWSTR index)
 
     TRACE("%s %p %s\n", debugstr_w(file), buf, debugstr_w(index));
 
-    if(!GetFullPathNameW(file, sizeof(full_path)/sizeof(full_path[0]), full_path, NULL)) {
+    if (!GetFullPathNameW(file, ARRAY_SIZE(full_path), full_path, NULL)) {
         WARN("GetFullPathName failed: %u\n", GetLastError());
         return FALSE;
     }
@@ -1830,7 +1830,7 @@ HHInfo *CreateHelpViewer(HHInfo *info, LPCWSTR filename, HWND caller)
     /* Set the invalid tab ID (-1) as the default value for all
      * of the tabs, this matches a failed TCM_INSERTITEM call.
      */
-    for(i=0;i<sizeof(info->tabs)/sizeof(HHTab);i++)
+    for (i = 0; i < ARRAY_SIZE(info->tabs); i++)
         info->tabs[i].id = -1;
 
     OleInitialize(NULL);
@@ -1867,7 +1867,7 @@ HHInfo *CreateHelpViewer(HHInfo *info, LPCWSTR filename, HWND caller)
  */
 static char find_html_symbol(const char *entity, int entity_len)
 {
-    int max = sizeof(html_encoded_symbols)/sizeof(html_encoded_symbols[0])-1;
+    int max = ARRAY_SIZE(html_encoded_symbols)-1;
     int min = 0, dir;
 
     while(min <= max)
-- 
2.14.4

